# =================================
# User Profiles Service Configuration
# =================================

# Application Configuration
NODE_ENV=development
PORT=3002
LOG_LEVEL=info
LOG_FORMAT=json

# Database Configuration
DATABASE_URL=postgresql://user_profiles:password@localhost:5432/smartedify_user_profiles
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=user_profiles
DB_PASSWORD=password
DB_DATABASE=smartedify_user_profiles
DB_SCHEMA=user_profiles

# Database Pool Configuration
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=2000

# Database SSL Configuration (Production)
DB_SSL_ENABLED=false
DB_SSL_REJECT_UNAUTHORIZED=true
# DB_SSL_CA=path/to/ca.pem
# DB_SSL_CERT=path/to/cert.pem
# DB_SSL_KEY=path/to/key.pem

# Database RLS Configuration
DB_RLS_ENABLED=true
DB_RLS_TENANT_CONTEXT_VAR=app.current_tenant
DB_RLS_APPLICATION_USER=application_user

# Redis Configuration
REDIS_URL=redis://localhost:6379
REDIS_TTL=300
REDIS_MAX=1000

# Security Configuration
JWT_SECRET=your-jwt-secret-key-here
ENCRYPTION_KEY=your-encryption-key-here
CORS_ORIGIN=*

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=1000

# Operations Configuration
BULK_MAX_ROWS_PER_JOB=10000
BULK_MAX_CONCURRENT_JOBS=5
BULK_JOB_TIMEOUT_MS=300000

EXPORTS_MAX_PER_MINUTE=10
EXPORTS_TTL_SECONDS=3600
EXPORTS_MAX_RECORDS=100000

PERMISSIONS_CACHE_ENABLED=true
PERMISSIONS_CACHE_TTL_SECONDS=300
PDP_TIMEOUT_MS=5000
PDP_FAIL_CLOSED=true

# External Services
COMPLIANCE_SERVICE_URL=http://localhost:3012
COMPLIANCE_SERVICE_TIMEOUT_MS=5000
COMPLIANCE_SERVICE_RETRIES=3

IDENTITY_SERVICE_URL=http://localhost:3001
IDENTITY_SERVICE_TIMEOUT_MS=5000
IDENTITY_SERVICE_RETRIES=3

TENANCY_SERVICE_URL=http://localhost:3003
TENANCY_SERVICE_TIMEOUT_MS=5000
TENANCY_SERVICE_RETRIES=3

# Observability Configuration
METRICS_ENABLED=true
METRICS_PATH=/metrics
METRICS_PREFIX=user_profiles_

TELEMETRY_ENABLED=true
OTEL_SERVICE_NAME=user-profiles-service
OTEL_SERVICE_VERSION=2.1.0
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# Logging Configuration
ENABLE_CONSOLE_LOGGING=true
ENABLE_FILE_LOGGING=false
LOG_FILE_PATH=./logs/user-profiles-service.log

# Health Check Configuration
HEALTH_DB_TIMEOUT_MS=3000
HEALTH_REDIS_TIMEOUT_MS=3000
HEALTH_EXTERNAL_TIMEOUT_MS=5000

# Development Configuration
DB_LOGGING_ENABLED=true
DB_LOG_QUERIES=false
DB_LOG_ERRORS=true
DB_MAX_QUERY_EXECUTION_TIME=1000

# Kafka Configuration (for events)
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=user-profiles-service
KAFKA_GROUP_ID=user-profiles-service-group
KAFKA_TOPIC_PREFIX=smartedify.user-profiles

# Feature Flags
FEATURE_BULK_OPERATIONS=true
FEATURE_EXPORTS=true
FEATURE_PERMISSIONS_CACHE=true
FEATURE_AUDIT_LOGGING=true

# Timezone
TZ=UTC

# Node.js Configuration
NODE_MAX_OLD_SPACE_SIZE=2048
NODE_OPTIONS=--max-old-space-size=2048